{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abel-chen/Desktop/grocery-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/abel-chen/Desktop/grocery-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/Users/abel-chen/Desktop/grocery-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState,useEffect}from'react';//import './RoomLobby.css';\nimport{makeStyles}from'@material-ui/core/styles';import TextField from'@material-ui/core/TextField';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import Typography from'@material-ui/core/Typography';import Paper from'@material-ui/core/Paper';import Grid from'@material-ui/core/Grid';import Button from'@material-ui/core/Button';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemText from'@material-ui/core/ListItemText';import Divider from'@material-ui/core/Divider';import IconButton from'@material-ui/core/IconButton';import CancelIcon from'@material-ui/icons/Cancel';import{BrowserRouter as Switch,Redirect,useHistory,useLocation,History,Link}from\"react-router-dom\";import axios from\"axios\";var currentRoom;var memberList;var groceryList;var user;function addGrocery(){return _addGrocery.apply(this,arguments);}function _addGrocery(){_addGrocery=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newGrocery;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('https://grocerynode.herokuapp.com/groceries/addGrocery',{name:document.getElementById('name').value,roomCode:currentRoom,message:document.getElementById('message').value,requester:user}).then(function(response){console.log(response);}).catch(function(error){console.log(error);});case 2:newGrocery=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return _addGrocery.apply(this,arguments);}function deleteGrocery(_x){return _deleteGrocery.apply(this,arguments);}function _deleteGrocery(){_deleteGrocery=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(idvalue){var idV,oldGrocery;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:idV=idvalue;_context2.next=3;return axios.post('https://grocerynode.herokuapp.com/groceries/deleteGrocery',{id:idV}).then(function(response){console.log(response);}).catch(function(error){console.log(error);});case 3:oldGrocery=_context2.sent;case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _deleteGrocery.apply(this,arguments);}var useStyles=makeStyles(function(theme){return{root:{width:'100%',minWidth:300,maxWidth:800,borderRadius:5,boxShadow:'0px 5px 5px 2px rgba(0, 0, 0, .3)',backgroundColor:theme.palette.background.paper,flexGrow:1},fullScreen:{flexGrow:1},fill:{width:'100%',flexGrow:1},textMem:{color:'#222222',fontFamily:'Raleway',fontSize:20},text:{color:'#222222',fontFamily:'Raleway',fontWeight:'bold',fontSize:30},textReq:{color:'#222222',fontFamily:'Raleway',fontStyle:'italic',fontSize:20},title:{color:'#444444',fontFamily:'Raleway',fontSize:43},centered:{display:\"flex\",flexDirection:\"column\",justifyContent:\"center\"}};});function RoomLobby(){var history=useHistory();var classes=useStyles();var location=useLocation();// room and user data\nuser=location.state.user;currentRoom=location.state.number;// member list data \nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];// grocery list data \nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),gItems=_useState4[0],setGItems=_useState4[1];//re-render on add grocery\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),alert=_useState6[0],setAlert=_useState6[1];useEffect(function(){axios.get('https://grocerynode.herokuapp.com/rooms/getRoom'+'?room='+encodeURIComponent(location.state.number),false).then(function(response){console.log(response.data);memberList=response.data[0].members;setItems(memberList);}).catch(function(error){console.log(error);});},[location.state.number]);useEffect(function(){if(gItems.length&&!alert){return;}axios.get('https://grocerynode.herokuapp.com/groceries/getGroceries'+'?room='+encodeURIComponent(location.state.number),false).then(function(response){groceryList=[];for(var i in response.data){groceryList.push(response.data[i]);}setGItems(groceryList);}).catch(function(error){console.log(error);});},[alert,gItems,location.state.number]);// Add grocery\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var handleCloseAdd=function handleCloseAdd(){setOpen(false);addGrocery();setAlert(true);};//back\nvar routeChange=function routeChange(){var path=\"/\";history.push(path);};return/*#__PURE__*/React.createElement(Grid,{container:true,spacing:4,style:{marginTop:\"3%\",marginLeft:\"8%\"},className:classes.fullScreen},/*#__PURE__*/React.createElement(Grid,{item:true,xl:3},/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Typography,{variant:\"h3\",className:classes.title,style:{marginLeft:\"8%\"}},\"Member List\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Paper,{style:{maxHeight:550,overflow:'auto'}},/*#__PURE__*/React.createElement(List,null,items.map(function(item,index){return/*#__PURE__*/React.createElement(ListItem,{key:index,item:item,className:classes.centered},/*#__PURE__*/React.createElement(ListItemText,{classes:{primary:classes.textMem},primary:item}));})))),/*#__PURE__*/React.createElement(\"div\",{className:classes.root,style:{marginTop:\"5%\"}},/*#__PURE__*/React.createElement(Button,{fullWidth:true,variant:\"outlined\",color:\"secondary\",bordercolor:\"white\",onClick:routeChange},\"Go Back\"))),/*#__PURE__*/React.createElement(Grid,{item:true,xl:9,className:classes.fullScreen},/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Typography,{variant:\"h3\",className:classes.title,style:{marginLeft:\"35%\"}},\"Grocery List\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Paper,{style:{maxHeight:550,overflow:'auto'}},/*#__PURE__*/React.createElement(List,null,gItems.map(function(item,index){return/*#__PURE__*/React.createElement(ListItem,{key:index,item:item,className:classes.centered},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:6,style:{overflow:\"hidden\"}},/*#__PURE__*/React.createElement(ListItemText,{classes:{primary:classes.text},primary:item.name,secondary:item.message})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4},/*#__PURE__*/React.createElement(ListItemText,{classes:{primary:classes.textReq},style:{marginTop:'6%'},primary:\"Requested by: \"+item.requester})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:2},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"cancel\",style:{width:'70%',height:'70%',marginTop:'3%'},onClick:function onClick(){return deleteGrocery(item._id);}},/*#__PURE__*/React.createElement(CancelIcon,{style:{width:'70%',height:'70%'}})))));}))),/*#__PURE__*/React.createElement(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",onClick:handleClickOpen},\"Add grocery\"),/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Add a Grocery\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(DialogContentText,null,\"Put the grocery name and a message if you want!\"),/*#__PURE__*/React.createElement(TextField,{autoFocus:true,margin:\"dense\",id:\"name\",label:\"Grocery Name\",type:\"typename\",fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{autoFocus:true,margin:\"dense\",id:\"message\",label:\"Message (optional)\",type:\"typemessage\",fullWidth:true})),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"primary\"},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{onClick:handleCloseAdd,color:\"primary\"},\"Add\"))))));}export default RoomLobby;","map":{"version":3,"sources":["/Users/abel-chen/Desktop/grocery-app/frontend/src/Pages/RoomLobby.js"],"names":["React","useState","useEffect","makeStyles","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Typography","Paper","Grid","Button","List","ListItem","ListItemText","Divider","IconButton","CancelIcon","BrowserRouter","Switch","Redirect","useHistory","useLocation","History","Link","axios","currentRoom","memberList","groceryList","user","addGrocery","post","name","document","getElementById","value","roomCode","message","requester","then","response","console","log","catch","error","newGrocery","deleteGrocery","idvalue","idV","id","oldGrocery","useStyles","theme","root","width","minWidth","maxWidth","borderRadius","boxShadow","backgroundColor","palette","background","paper","flexGrow","fullScreen","fill","textMem","color","fontFamily","fontSize","text","fontWeight","textReq","fontStyle","title","centered","display","flexDirection","justifyContent","RoomLobby","history","classes","location","state","number","items","setItems","gItems","setGItems","alert","setAlert","get","encodeURIComponent","data","members","length","i","push","open","setOpen","handleClickOpen","handleClose","handleCloseAdd","routeChange","path","marginTop","marginLeft","maxHeight","overflow","map","item","index","primary","height","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n//import './RoomLobby.css';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport { BrowserRouter as Switch, Redirect, useHistory, useLocation, History, Link } from \"react-router-dom\";\n\nimport axios from \"axios\";\n\nvar currentRoom;\nvar memberList;\nvar groceryList;\nvar user;\n\nasync function addGrocery() {\n  const newGrocery = await axios.post('https://grocerynode.herokuapp.com/groceries/addGrocery', {\n    name: document.getElementById('name').value,\n    roomCode: currentRoom,\n    message: document.getElementById('message').value,\n    requester: user,\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nasync function deleteGrocery(idvalue) {\n  var idV = idvalue;\n  const oldGrocery = await axios.post('https://grocerynode.herokuapp.com/groceries/deleteGrocery', {\n    id: idV,\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    minWidth: 300,\n    maxWidth: 800,\n    borderRadius: 5,\n    boxShadow: '0px 5px 5px 2px rgba(0, 0, 0, .3)',\n    backgroundColor: theme.palette.background.paper,\n    flexGrow: 1,\n  },\n  fullScreen: {\n    flexGrow: 1,\n  },\n  fill: {\n  \twidth: '100%',\n    flexGrow: 1,\n  },\n  textMem: {\n    color: '#222222',\n    fontFamily: 'Raleway',\n    fontSize: 20,\n  },\n  text: {\n    color: '#222222',\n    fontFamily: 'Raleway',\n    fontWeight: 'bold',\n    fontSize: 30,\n  },\n  textReq: {\n    color: '#222222',\n    fontFamily: 'Raleway',\n    fontStyle: 'italic',\n    fontSize: 20,\n  },\n  title: {\n  \tcolor: '#444444',\n  \tfontFamily: 'Raleway',\n    fontSize: 43,\n  },\n  centered: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\"\n  },\n}));\n\nfunction RoomLobby() {\n  const history = useHistory();\n  const classes = useStyles();\n  const location = useLocation();\n  \n  // room and user data\n  user = location.state.user;\n  currentRoom = location.state.number;\n\n  // member list data \n  const [items, setItems] = useState([]);\n\n  // grocery list data \n  const [gItems, setGItems] = useState([]);\n\n  //re-render on add grocery\n  const [alert, setAlert] = useState(false);\n\n  useEffect(() => {\n    axios.get('https://grocerynode.herokuapp.com/rooms/getRoom' + '?room=' + encodeURIComponent(location.state.number), false)\n\t.then((response) => {\n\t    console.log(response.data);\n\t    memberList = response.data[0].members;\n\t    setItems(memberList);\n  \t})\n  \t.catch(function (error) {\n    \tconsole.log(error);\n  \t});\n\n  }, [location.state.number]);\n  useEffect(() => {\n  \tif(gItems.length && !alert) {\n      return;\n    }\n  \taxios.get('https://grocerynode.herokuapp.com/groceries/getGroceries' + '?room=' + encodeURIComponent(location.state.number), false)\n\t.then((response) => {\n\t    groceryList = []\n\t    for(var i in response.data) {\n\t    \tgroceryList.push(response.data[i]);\n\t    }\n\t    setGItems(groceryList);\n  \t})\n  \t.catch(function (error) {\n    \tconsole.log(error);\n  \t});\n\n  }, [alert, gItems, location.state.number]);\n\n  // Add grocery\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleCloseAdd = () => {\n    setOpen(false);\n    addGrocery();\n    setAlert(true);\n  };\n  \n  //back\n  const routeChange = () =>{ \n    let path = \"/\"; \n    history.push(path);\n  }\n\n  return (\n   <Grid container spacing={4} style={{ marginTop: \"3%\", marginLeft: \"8%\"}} className={classes.fullScreen}>\n    <Grid item xl={3} >\n  \t<div className={classes.root}>\n            <Typography variant=\"h3\" className={classes.title} style={{ marginLeft: \"8%\" }}>Member List</Typography>\n            <Divider />\n            <Paper style={{maxHeight: 550, overflow: 'auto'}}>\n          \t<List>\n        \t\t{items.map((item, index) => (\n          \t\t<ListItem key={index} item={item} className={classes.centered}>\n        \t\t\t<ListItemText classes={{primary:classes.textMem}} primary= {item} />\n          \t\t</ListItem>\n      \t\t\t))}\n      \t\t</List>\n      \t\t</Paper>\n    </div>\n    <div className={classes.root} style={{ marginTop: \"5%\"}}>\n      <Button fullWidth={true} variant=\"outlined\" color=\"secondary\" bordercolor=\"white\" onClick={routeChange}>Go Back</Button>\n    </div>\n    </Grid>\n\n    <Grid item xl={9} className={classes.fullScreen}>\n    <div className={classes.root}>\n        <Typography variant=\"h3\" className={classes.title} style={{ marginLeft: \"35%\" }}>Grocery List</Typography>\n        <Divider />\n        <Paper style={{maxHeight: 550, overflow: 'auto'}}>\n        <List>\n        \t{gItems.map((item, index) => (\n          \t<ListItem key={index} item={item} className={classes.centered}>\n          \t    <Grid container spacing={3} >\n    \t\t\t<Grid item xs={6} style={{ overflow: \"hidden\"}} >\n        \t\t\t<ListItemText classes={{primary:classes.text}} primary= {item.name} secondary= {item.message}/>\n        \t\t</Grid>\n        \t\t<Grid item xs={4} >\n        \t\t    <ListItemText classes={{primary:classes.textReq}} style={{marginTop: '6%'}} primary= {\"Requested by: \" + item.requester} />\n        \t\t</Grid>\n        \t\t<Grid item xs={2} >\n        \t\t    <IconButton aria-label=\"cancel\" style={{width: '70%', height: '70%', marginTop: '3%'}} onClick={() => deleteGrocery(item._id)}>\n        \t\t\t\t<CancelIcon style={{width: '70%', height: '70%'}}/>\n     \t\t\t\t</IconButton>\n        \t\t</Grid>\n        \t\t</Grid>\n          \t</ListItem>\n      \t\t))}\n      \t</List>\n        </Paper>\n\n      <Button fullWidth={true} variant=\"contained\" color=\"primary\" onClick={handleClickOpen}>\n        Add grocery\n      </Button>\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Add a Grocery</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Put the grocery name and a message if you want!\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Grocery Name\"\n            type=\"typename\"\n            fullWidth\n          />\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"message\"\n            label=\"Message (optional)\"\n            type=\"typemessage\"\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleCloseAdd} color=\"primary\">\n            Add\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n    </Grid>\n    </Grid>\n  )\n}\nexport default RoomLobby;"]},"metadata":{},"sourceType":"module"}